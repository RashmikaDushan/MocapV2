import numpy as np
from Helpers import triangulate_point
from scipy import linalg

image_point = [596.66625, 130.0005]
X = np.array([0.5,0.6,-4,1])
X2 = np.array([2.30286,4.80823,1.51233,1])

E1 = [
    [0.9180008172988892,
        -0.029826710000634193,
        -0.3954553008079529,0.27993518114089966],
    [-0.39657852053642273,
        -0.06904293596744537,
        -0.9154007434844971,1.3863455057144165],
    [-2.214157094314746e-16,
        0.997167706489563,
        -0.0752101019024849,0.6131913065910339],
    [0, 0, 0,1]]


I1 = [
    [933.33, 0.0, 480,0.0],
    [0.0, 933.33, 270,0.0],
    [0.0, 0.0, 1.0,0.0]
]

E1 = np.array(E1)
I1 = np.array(I1)

# P1 = I1 @ np.linalg.inv(E1)

V = np.linalg.inv(E1) @ X2
V = np.array([V[0], -V[1], -V[2],1.0])
print("V: ",V)

U = I1 @ V
U = U/U[2]
print("U: ",U)

P = I1 @ np.linalg.inv(E1)

W = P @ X2
W = W/W[2]
print("W: ",W)